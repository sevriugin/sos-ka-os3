<div id="wrap">
	<div id="main-nav" class="">
		<div class="container-fluid">	
			<div class="nav-header">
				<a href="#/products" class="nav-brand"><img ng-src="img/logo.jpg" alt="item"></a>
				<a class="nav-icon pull-right visible-xs menu-link" href="#/about" ng-click="menuToggle()"><i class="icon-menu2"></i></a>
				<a class="nav-icon-outline cart pull-right" href="#/cart"><i class="icon-cart"></i><span class="badge">{{qty()}}</span></a>
			</div>
		</div>
	</div>

	<div class="container-fluid title">
		<div class="row">
			<div ng-if="!itsUpdate" class="col-sm-12">
				<h2>ОФОРМИТЬ ЗАКАЗ</h2>
			</div>
			<div ng-if="itsUpdate" class="col-sm-12">
				<h2>ИЗМЕНИТЬ ЗАКАЗ {{updateId()}}</h2>
			</div>
		</div>
	</div>

	<div class="container-fluid cart-list">
		<div ng-if="product.banner && product.active" lass="col-sm-6">
			<a href="{{product.url}}">
				<img ng-src="{{product.imageUrl}}" class="img-responsive" alt="item">
			</a>
		</div>
	</div>

	<div class="container-fluid cart-list">
		<div class="row">
			<div class="col-sm-6">
				<form name="form" ng-submit="checkout()" role="form" class="myform">
					<h3 class="text-center">адрес доставки</h3>
					<div class="row">
						<div class="col-sm-6">
							<div class="form-group">
								<label class="control-label" for="firstname">имя</label>
        						<i class="fa fa-key"></i>
       							<input type="text" name="firstname" id="firstname" placeholder="имя" class="form-control" ng-model="firstname" required />
        						<span ng-show="form.firstname.$dirty && form.firstname.$error.required" class="form-control">ПОЖАЛУЙСТА, УКАЖИТЕ ВАШЕ ИМЯ</span>
							</div>
						</div>
						<div class="col-sm-6">
							<div class="form-group">
								<label class="control-label" for="lastname">фамилия</label>
        						<i class="fa fa-key"></i>
       							<input type="text" name="lastname" id="lastname" placeholder="фамилия" class="form-control" ng-model="lastname" required />
        						<span ng-show="form.lastname.$dirty && form.lastname.$error.required" class="form-control">ПОЖАЛУЙСТА, УКАЖИТЕ ВАШЕУ ФАМИЛИЮ</span>
							</div>
						</div>
					</div>	
					<div class="form-group">
						<label class="control-label" for="email">email</label>
        				<i class="fa fa-key"></i>
       					<input type="text" name="email" id="email" placeholder="адрес электронной почты" class="form-control" ng-model="email" required ng-pattern="/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|site|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i" ng-minlength="6"/>
        				<span ng-show="form.email.$dirty && form.email.$error.required" class="form-control">ПОЖАЛУЙСТА, УКАЖИТЕ ВАШ АДРЕС ЭЛЕКТРОННОЙ ПОЧТЫ</span>
        				<span ng-show="form.email.$error.pattern || form.email.$error.minlength" class="form-control">НЕПРАВИЛЬНЫЙ ФОРМАТ E-MAIL</span>
					</div>							
					<div class="form-group">
						<label class="control-label" for="address">адрес</label>
        				<i class="fa fa-key"></i>
       					<input type="text" name="address" id="address" placeholder="адрес" class="form-control" ng-model="address" required />
        				<span ng-show="form.address.$dirty && form.address.$error.required" class="form-control">ПОЖАЛУЙСТА, УКАЖИТЕ ВАШ АДРЕС</span>
					</div>
					<div class="form-group">
						<label class="control-label" for="address2">продолжение адреса или промо-код (необязательно)</label>
        				<i class="fa fa-key"></i>
       					<input type="text" name="address2" id="address2" placeholder="продолжение адреса или промо-код (необязательно)" class="form-control" ng-model="address2" />
					</div>
					<div class="form-group">
						<label class="control-label" for="city">город</label>
        				<i class="fa fa-key"></i>
       					<input type="text" name="city" id="city" placeholder="город" class="form-control" ng-model="city" required />
        				<span ng-show="form.city.$dirty && form.city.$error.required" class="form-control">ПОЖАЛУЙСТА, УКАЖИТЕ ВАШ ГОРОД</span>
					</div>
					<div class="form-group">
						<label class="control-label" for="postal">индекс</label>
        				<i class="fa fa-key"></i>
       					<input type="text" name="postal" id="postal" placeholder="индекс" class="form-control" ng-model="postal" required />
        				<span ng-show="form.postal.$dirty && form.postal.$error.required" class="form-control">ПОЖАЛУЙСТА, УКАЖИТЕ ВАШ ПОЧТОВЫЙ ИНДЕКС</span>
					</div>					
					<div class="form-group">
						<label class="control-label" for="phone">телефон</label>
        				<i class="fa fa-key"></i>
       					<input type="text" name="phone" id="phone" placeholder="телефон" class="form-control" ng-model="phone" required ng-pattern="/^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/" ng-minlength="10"/>
        				<span ng-show="form.phone.$dirty && form.phone.$error.required" class="form-control">ПОЖАЛУЙСТА, УКАЖИТЕ ВАШ ТЕЛЕФОН</span>
        				<span ng-show="form.phone.$error.pattern || form.phone.$error.minlength" class="form-control">НЕПРАВИЛЬНЫЙ ФОРМАТ ТЕЛЕФОНА</span>
					</div>
					<div class="row">
						<div class="col-sm-6">
							<p>Способ доставки</p>
						</div>
						<div class="col-sm-6">
							<div class="form-group">
								<label class="control-label" for="takeaway">способ доставки</label>
        						<i class="fa fa-key"></i>
        						<select id="delivery" class="form-control" ng-model="takeaway" tabindex="3" required>
									<option disabled="disabled" selected="selected" value="">способ доставки</option>
									<option value="delivery">курьер Москва</option>
									<option value="dpdauto">курьер НЕ Москва</option>
									<option value="takeaway">самовывоз</option>
									<option value="post">почтой</option>
								</select>
        						<span ng-show="form.delivery.$dirty && form.delivery.$error.required" class="form-control">ПОЖАЛУЙСТА, СПОСОБ ДОСТАВКИ</span>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-6">
							<p>Предпочтительный день доставки / самовывоза</p>
						</div>
						<div class="col-sm-6">
							<div class="form-group">
								<label class="control-label" for="delivery">день доставки</label>
        						<i class="fa fa-key"></i>
        						<select id="delivery" class="form-control" ng-model="delivery" tabindex="8" required>
									<option disabled="disabled" selected="selected" value="">день доставки</option>
									<option value="2">{{moment | amAdd : '3' : 'days' | amDateFormat : 'dddd Do MMMM YYYY'}}</option>
									<option value="3">{{moment | amAdd : '4' : 'days' | amDateFormat : 'dddd Do MMMM YYYY'}}</option>
									<option value="4">{{moment | amAdd : '5' : 'days' | amDateFormat : 'dddd Do MMMM YYYY'}}</option>
									<option value="5">{{moment | amAdd : '6' : 'days' | amDateFormat : 'dddd Do MMMM YYYY'}}</option>
									<option value="6">{{moment | amAdd : '7' : 'days' | amDateFormat : 'dddd Do MMMM YYYY'}}</option>
									<option value="7">{{moment | amAdd : '8' : 'days' | amDateFormat : 'dddd Do MMMM YYYY'}}</option>
									<option value="10">{{moment | amAdd : '10' : 'days' | amDateFormat : 'dddd Do MMMM YYYY'}}</option>
								</select>
        						<span ng-show="form.delivery.$dirty && form.delivery.$error.required" class="form-control">ПОЖАЛУЙСТА, УКАЖИТЕ ДЕНЬ ДОСТАВКИ</span>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-6">
							<p>Предпочтительный время доставки / самовывоза</p>
						</div>
						<div class="col-sm-6">
							<div class="form-group">
								<label class="control-label" for="time">время доставки</label>
        						<i class="fa fa-key"></i>
        						<select id="time" class="form-control" ng-model="time" tabindex="5" required>
									<option disabled="disabled" selected="selected" value="">время доставки</option>
									<option ng-disabled="takeaway=='post'" value="10:00-13:00">10:00-13:00</option>
									<option ng-disabled="takeaway=='post'" value="13:00-18:00">13:00-18:00</option>
									<option ng-disabled="takeaway=='post'" value="18:00-21:00">18:00-21:00</option>
									<option ng-disabled="takeaway!='post'" value="на почте 09:00-18:00">на почте 09:00-18:00</option>
								</select>
        						<span ng-show="form.time.$dirty && form.time.$error.required" class="form-control">ПОЖАЛУЙСТА, УКАЖИТЕ ВРЕМЯ ДОСТАВКИ</span>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-10">
							<p>Я принимаю <a href="#/terms">условия и правила</a> работы интернет-магазина и даю согласие на обработку персональной информации</p>
						</div>
						<div class="col-sm-2">
							<div class="form-group">
								<label class="control-label" for="terms">условия</label>
        						<i class="fa fa-key"></i>
        						<select id="terms" class="form-control" ng-model="terms" tabindex="2" required>
									<option disabled="disabled" selected="selected" value="">нет</option>
									<option value="yes">да</option>
								</select>
        						<span ng-show="form.terms.$dirty && form.terms.$error.required" class="form-control">ПОЖАЛУЙСТА, ПРИМИТЕ УСЛОВИЯ И ПРАВИЛА</span>
							</div>
						</div>
					</div>
					<div class="row" ng-if="false">
						<div class="col-sm-10">
							<p>Я хочу получать новости из магазина SOS-ka.com Shop</p>
						</div>
						<div class="col-sm-2">
							<div class="form-group">
								<label class="control-label" for="news">новости</label>
        						<i class="fa fa-key"></i>
        						<select id="news" class="form-control" ng-model="news" tabindex="2" required>
									<option disabled="disabled" selected="selected" value="">---</option>
									<option value="yes">да</option>
									<option value="no">нет</option>
								</select>
        						<span ng-show="form.news.$dirty && form.news.$error.required" class="form-control">ПОЖАЛУЙСТА, ПРИМИТЕ УСЛОВИЯ РАССЫЛКИ НОВОСТЕЙ</span>
							</div>
						</div>
					</div>	
					<p><button analytics-on analytics-event="ORDER" type="submit" ng-disabled="form.$invalid || dataLoading || success" class="btn btn-store btn-block">Заказать</button></p>
        			<img ng-if="newdataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>		
				</form>
				<div ng-show="success" id="alert-contact"> 
					<div class="alert alert-success" role="alert"><strong>ВАШ ЗАКАЗ ОТПРАВЛЕН</strong></div>
				</div>
				<div ng-show="error" class="alert alert-danger">{{error}}</div>
			</div>
			<div class="col-sm-6 ">
				<table class="table">
					<thead>
						<tr>
							<th colspan="3" class="text-center">Вы заказали следующий товар:</th>
						</tr>
					</thead>
					<tbody>
						<tr ng:repeat="item in invoice.items">
	  	 					<td class="vert-align">{{ item.vendor }} - {{ item.title}}</td>
							<td class="vert-align">{{ item.qty}}x</td>
							<td class="vert-align text-right">{{ item.qty * item.cost | currency:"₽ ":0 }}</td>
						</tr>
						<tr>
							<td class="vert-align"><b>подитог :</b></td>
							<td class="vert-align"></td>
							<td class="vert-align text-right"><b>{{total() | currency:"₽ ":0}}</b></td>
						</tr>
						<tr>
							<td class="vert-align">доставка :</td>
							<td class="vert-align"></td>
							<td class="vert-align text-right">{{shiping() | currency:"₽ ":0}}</td>
						</tr>
						<tr>
							<td class="vert-align">налоги :</td>
							<td class="vert-align"></td>
							<td class="vert-align text-right">{{tax() | currency:"₽ ":0}}</td>
						</tr>
						<tr>
							<td class="vert-align"><b>итого :</b></td>
							<td class="vert-align"></td>
							<td class="vert-align text-right" id="total">{{(total()+shiping()+tax()) | currency:"₽ ":0}}</td>
						</tr>
					</tbody>
				</table>
				<div>
					<p>
						СПОСОБ ОПЛАТЫ : Наличные/безналичные курьеру или на счет (почта)
					</p>
				</div>		
			</div>	
		</div>

		<div class="row">
			<div class="col-sm-12 text-center show-more">
				<a analytics-on analytics-event="CANCEL_ORDER" href="index.html" class="btn btn-outline">Отменить и вернуться в магазин</a>
			</div>	
		</div>
	</div>
</div>